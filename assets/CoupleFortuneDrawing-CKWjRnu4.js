import{r as e,i as t,b as a,e as l,m as s,j as n,u as o,y as i,z as u,A as c,F as r,f as d,t as v,v as p,n as m}from"./vendor-BdasZo-s.js";import{u as h}from"./fortune-data-CSgtve2-.js";import{_ as b}from"./index-Cpns8shK.js";import"./utils-tmAjFC_f.js";import"./composables-CKSE-Hpx.js";const g={class:"couple-fortune-container themed-container"},y={key:0,class:"couple-intro decorative-section"},f={key:1,class:"partner-input themed-section-box"},$={class:"couple-form-grid"},k={class:"form-section user-section"},C={class:"input-group themed-input-group"},D={class:"input-group themed-input-group"},w={class:"date-select-container themed-date-select"},S=["value"],A=["value"],U=["value"],V={class:"form-section partner-section"},j={class:"input-group themed-input-group"},_={class:"input-group themed-input-group"},x={class:"date-select-container themed-date-select"},N=["value"],T=["value"],F=["value"],M={key:2,class:"couple-result"},z={class:"compatibility-meter"},H={class:"meter-value"},I={class:"meter-bar"},L={class:"result-content"},Y={class:"result-description"},q={class:"result-advice"},B=b({__name:"CoupleFortuneDrawing",setup(b){const B=h(),E=e(""),G=e(""),J=e(""),K=e(""),O=e(!1),P=t({compatibility:0,title:"",description:"",advice:""}),Q=e(""),R=e(""),W=e(""),X=e(""),Z=e(""),ee=e(""),te=(new Date).getFullYear(),ae=Array.from({length:te-1949},((e,t)=>te-t)),le=Array.from({length:12},((e,t)=>t+1)),se=(e,t)=>{if(!e||!t)return Array.from({length:31},((e,t)=>t+1));const a=new Date(e,t,0).getDate();return Array.from({length:a},((e,t)=>t+1))},ne=()=>{Q.value&&R.value&&W.value&&(G.value=`${Q.value}-${R.value.toString().padStart(2,"0")}-${W.value.toString().padStart(2,"0")}`),X.value&&Z.value&&ee.value&&(K.value=`${X.value}-${Z.value.toString().padStart(2,"0")}-${ee.value.toString().padStart(2,"0")}`)},oe=()=>{O.value=!O.value,O.value||(P.title="")},ie=()=>{if(!(E.value&&G.value&&J.value&&K.value))return void alert("请完整填写双方信息");const e=(()=>{if(!(E.value&&G.value&&J.value&&K.value))return 0;const e=new Date(G.value),t=new Date(K.value),a=(e.getDate()+e.getMonth()+1)*(t.getDate()+t.getMonth()+1)%40+60,l=(E.value.length+J.value.length)%5;return Math.min(99,a+l)})();P.compatibility=e,e>=90?(P.title="天作之合",P.description="你们是天生一对，缘分深厚，心有灵犀。彼此理解与包容，能够共同成长。",P.advice="珍惜这段难得的缘分，相互扶持，共创美好未来。"):e>=80?(P.title="良缘佳偶",P.description="你们的缘分深厚，性格互补，在一起能激发彼此的最佳状态。",P.advice="在生活的点滴中增进了解，用心经营这段感情。"):e>=70?(P.title="相濡以沫",P.description="你们的关系需要用心经营，但只要共同努力，定能走得长远。",P.advice="多沟通、多理解，学会欣赏彼此的不同。"):(P.title="缘分考验",P.description="你们之间存在不少挑战，需要更多的包容与妥协。",P.advice="学会换位思考，尊重对方的不同，或许能发现意想不到的契合点。"),B.saveToHistory({type:"双人合卦",date:(new Date).toLocaleDateString(),result:`${P.title} (${P.compatibility}分)`,user:E.value,partner:J.value})};return(e,t)=>(l(),a("div",g,[O.value?s("",!0):(l(),a("div",y,[t[9]||(t[9]=n("h3",{class:"main-title"},[n("span",{class:"deco-icon left"},"💞"),o(" 双人姻缘合卦 "),n("span",{class:"deco-icon right"},"💞")],-1)),t[10]||(t[10]=n("p",{class:"intro-text"},[o("执子之手，与子偕老。在此诚邀两位小主，"),n("br"),o("一同卜算心心相印的缘分指数，"),n("br"),o("探寻那份专属於你们的浪漫篇章。")],-1)),n("button",{class:"start-couple-btn themed-button primary-button",onClick:oe},t[8]||(t[8]=[n("span",{class:"btn-icon"},"💌",-1),o(" 启此良缘合卦 ")]))])),O.value&&!P.title?(l(),a("div",f,[t[25]||(t[25]=n("h3",{class:"section-title"},[n("span",{class:"deco-icon left"},"❦"),o(" 请入双方结缘信息 "),n("span",{class:"deco-icon right"},"❦")],-1)),n("div",$,[n("div",k,[t[16]||(t[16]=n("h4",{class:"form-section-title"},"缘主·其一",-1)),n("div",C,[t[11]||(t[11]=n("label",{for:"userName"},"芳名：",-1)),i(n("input",{id:"userName","onUpdate:modelValue":t[0]||(t[0]=e=>E.value=e),placeholder:"轻启玉指，输入芳名",class:"themed-input"},null,512),[[u,E.value]])]),n("div",D,[t[15]||(t[15]=n("label",null,"生辰：",-1)),n("div",w,[i(n("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>Q.value=e),class:"date-select year-select themed-select",onChange:ne},[t[12]||(t[12]=n("option",{value:"",disabled:"",selected:""},"年",-1)),(l(!0),a(r,null,d(p(ae),(e=>(l(),a("option",{key:`user-year-${e}`,value:e},v(e),9,S)))),128))],544),[[c,Q.value]]),i(n("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>R.value=e),class:"date-select month-select themed-select",onChange:ne},[t[13]||(t[13]=n("option",{value:"",disabled:"",selected:""},"月",-1)),(l(!0),a(r,null,d(p(le),(e=>(l(),a("option",{key:`user-month-${e}`,value:e},v(e),9,A)))),128))],544),[[c,R.value]]),i(n("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>W.value=e),class:"date-select day-select themed-select",onChange:ne},[t[14]||(t[14]=n("option",{value:"",disabled:"",selected:""},"日",-1)),(l(!0),a(r,null,d(se(Q.value,R.value),(e=>(l(),a("option",{key:`user-day-${e}`,value:e},v(e),9,U)))),128))],544),[[c,W.value]])])])]),t[23]||(t[23]=n("div",{class:"input-separator-vertical"},null,-1)),n("div",V,[t[22]||(t[22]=n("h4",{class:"form-section-title"},"缘主·其二",-1)),n("div",j,[t[17]||(t[17]=n("label",{for:"partnerName"},"TA之名：",-1)),i(n("input",{id:"partnerName","onUpdate:modelValue":t[4]||(t[4]=e=>J.value=e),placeholder:"轻启玉指，输入TA名",class:"themed-input"},null,512),[[u,J.value]])]),n("div",_,[t[21]||(t[21]=n("label",null,"TA生辰：",-1)),n("div",x,[i(n("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>X.value=e),class:"date-select year-select themed-select",onChange:ne},[t[18]||(t[18]=n("option",{value:"",disabled:"",selected:""},"年",-1)),(l(!0),a(r,null,d(p(ae),(e=>(l(),a("option",{key:`partner-year-${e}`,value:e},v(e),9,N)))),128))],544),[[c,X.value]]),i(n("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>Z.value=e),class:"date-select month-select themed-select",onChange:ne},[t[19]||(t[19]=n("option",{value:"",disabled:"",selected:""},"月",-1)),(l(!0),a(r,null,d(p(le),(e=>(l(),a("option",{key:`partner-month-${e}`,value:e},v(e),9,T)))),128))],544),[[c,Z.value]]),i(n("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>ee.value=e),class:"date-select day-select themed-select",onChange:ne},[t[20]||(t[20]=n("option",{value:"",disabled:"",selected:""},"日",-1)),(l(!0),a(r,null,d(se(X.value,Z.value),(e=>(l(),a("option",{key:`partner-day-${e}`,value:e},v(e),9,F)))),128))],544),[[c,ee.value]])])])])]),n("div",{class:"couple-buttons button-row"},[n("button",{class:"cancel-btn themed-button secondary-button",onClick:oe},"返回"),n("button",{class:"draw-btn themed-button primary-button",onClick:ie},t[24]||(t[24]=[n("span",{class:"btn-icon"},"💖",-1),o(" 合此良缘天定 ")]))])])):s("",!0),P.title?(l(),a("div",M,[n("div",z,[t[26]||(t[26]=n("div",{class:"meter-title"},"缘分指数",-1)),n("div",H,v(P.compatibility)+"%",1),n("div",I,[n("div",{class:"meter-fill",style:m({width:P.compatibility+"%"})},null,4)])]),n("div",L,[n("h3",null,v(P.title),1),n("p",Y,v(P.description),1),n("p",q,"【缘分建议】"+v(P.advice),1)]),n("button",{class:"try-again-btn themed-button secondary-button",onClick:oe},"重新测算")])):s("",!0)]))}},[["__scopeId","data-v-d5a8c200"]]);export{B as default};
